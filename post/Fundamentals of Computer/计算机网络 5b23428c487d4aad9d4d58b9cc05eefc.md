# 计算机网络

## 一、网络分层

1. **TCP/IP协议体系的认知**

2. **链路层**

   1. 以太网帧的格式

   2. MTU的概念

3. **ARP协议和RARP协议（掌握一下ARP缓存的原理）**

4. 网络层

   1. 掌握IP的首部格式

   2. 掌握IP的分片

   3. 掌握IP选路

   4. ICMP协议

5.  **传输层**

    1.  UDP，次要一点，掌握特点和首部各个字段

    2.  掌握TCP

        1.  特点 + 首部字段 + 可靠机制

        2.  连接控制 ： 三次握手，四次挥手，同时打开，同时关闭，半关闭（可能问到为什么需要）

        3.  流量控制机制：滑动窗口,慢启动，拥塞避免，快速重传，快速恢复

        4.  超时重传机制

6.  **应用层**

    1.  掌握DNS协议

        1.  名字空间

        2.  指针查询（反向查找或逆向解析）基本原理

        3.  DNS缓存

    2.  FTP协议（活化石）：

        1.  控制流和数据流

        2.  两种工作模式： PASV 和 PORT

        3.  各种指令和响应码

        4.  断点续传和匿名FTP的概念

    3.  HTTP协议：

        1.  报文格式：请求报文，响应报文，请求头各种字段，响应头各种字段

        2.  HTTP状态码

    4. HTTPS协议

        1.  握手的详细过程

        2.  摘要算法，数字签名，数字证书的原理和过程

## 二、TCP与Socket详解

1、三次握手和四次挥手

2、Socket其实就是等于**IP地址 + 端口 + 协议**

![Untitled](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%205b23428c487d4aad9d4d58b9cc05eefc/Untitled.png)

Nagle算法：**任意时刻，最多只能有一个未被确认的小段**。所谓“小段”，指的是小于MSS尺寸的数据块，所谓“未被确认”，是指一个数据块发送出去后，没有收到对方发送的ACK确认该数据已收到。

## 三、TCP抓包分析

[有了这篇网络排错思路大总结：我帮了不少女同事~ (qq.com)](https://mp.weixin.qq.com/s/L8jmABzoI_e4dCcECenHtQ)

## 四、HTTP与HTTPS

1、请求方式

![Untitled](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%205b23428c487d4aad9d4d58b9cc05eefc/Untitled%201.png)

![Untitled](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%205b23428c487d4aad9d4d58b9cc05eefc/Untitled%202.png)

2、状态码

![Untitled](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%205b23428c487d4aad9d4d58b9cc05eefc/Untitled%203.png)

3、端口及服务

![Untitled](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%205b23428c487d4aad9d4d58b9cc05eefc/Untitled%204.png)

4、HTTP协议是无状态的（但是有cookie的话就会记录之前的一些信息）

5、HTTP/1.0，1.1，2.0的区别：**HTTP/1.0**默认是短连接，可以强制开启，HTTP/1.1默认长连接，HTTP/2.0采用**多路复用**

6、HTTP与HTTPS的区别

HTTP，即超文本传输协议，是一个基于TCP/IP通信协议来传递明文数据的协议。HTTP会存在这**几个问题**：

- 请求信息是明文传输，容易被窃听截取。
- 没有验证对方身份，存在被冒充的风险
- 数据的完整性未校验，容易被中间人篡改

为了解决Http存在的问题，Https出现啦，其流程如下：

![Untitled](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%205b23428c487d4aad9d4d58b9cc05eefc/Untitled%205.png)

## 五、从输入到显示界面的过程

![Untitled](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%205b23428c487d4aad9d4d58b9cc05eefc/Untitled%206.png)

## 六、微服务相关网络协议

## 七、IP与DNS

![Untitled](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%205b23428c487d4aad9d4d58b9cc05eefc/Untitled%207.png)

ping的原理

一般来说，ping可以用来检测网络通不通。它是基于`ICMP`协议工作的。假设**机器A** ping**机器B**，工作过程如下：

1. ping通知系统，新建一个固定格式的ICMP请求数据包
2. ICMP协议，将该数据包和目标机器B的IP地址打包，一起转交给IP协议层
3. IP层协议将本机IP地址为源地址，机器B的IP地址为目标地址，加上一些其他的控制信息，构建一个IP数据包
4. 先获取目标机器B的MAC地址。
5. 数据链路层构建一个数据帧，目的地址是IP层传过来的**MAC地址**，源地址是本机的**MAC地址**
6. 机器B收到后，对比目标地址，和自己本机的MAC地址是否一致，符合就处理返回，不符合就丢弃。
7. 根据目的主机返回的ICMP回送回答报文中的时间戳，从而计算出往返时间
8. 最终显示结果有这几项：发送到目的主机的IP地址、发送 & 收到 & 丢失的分组数、往返时间的最小、最大& 平均值

## 八、常用网络协议

![Untitled](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%205b23428c487d4aad9d4d58b9cc05eefc/Untitled%208.png)

## 九、RPC

- [RPC是什么，看完你就知道了 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/187560185)

![Untitled](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%205b23428c487d4aad9d4d58b9cc05eefc/Untitled%209.png)

## 十、Web服务器

- Apache
- Nginx

## 十一、常见网络攻击

**CSRF攻击、Xss攻击、SQL注入、DDoS**

![Untitled](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%205b23428c487d4aad9d4d58b9cc05eefc/Untitled%2010.png)

![Untitled](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%205b23428c487d4aad9d4d58b9cc05eefc/Untitled%2011.png)

![Untitled](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%205b23428c487d4aad9d4d58b9cc05eefc/Untitled%2012.png)

SYN Flood是一种典型的DDos攻击

## 十二、负载均衡

**DNS**：这是最简单的负载均衡的方式，一般用于实现地理级别的负载均衡，不同地域的用户通过DNS的解析可以返回不同的IP地址，这种方式的负载均衡简单，但是扩展性太差，控制权在域名服务商。

**Http重定向**：通过修改Http响应头的Location达到负载均衡的目的，Http的302重定向。这种方式对性能有影响，而且增加请求耗时。

**反向代理**：作用于应用层的模式，也被称作为**七层负载均衡**，比如常见的Nginx，性能一般可以达到万级。这种方式部署简单，成本低，而且容易扩展。

**IP**：作用于网络层的和传输层的模式，也被称作**四层负载均衡**，通过对数据包的IP地址和端口进行修改来达到负载均衡的效果。常见的有LVS（Linux Virtual Server），通常性能可以支持10万级并发。

按照类型来划分的话，还可以分成DNS负载均衡、硬件负载均衡、软件负载均衡。

其中硬件负载均衡价格昂贵，性能最好，能达到百万级，软件负载均衡包括Nginx、LVS这种。